<!DOCTYPE html><html class="i-ua_js_no i-ua_css_standart"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7, IE=edge"/><title>заголовок</title><script>document.documentElement.className=document.documentElement.className.replace("i-ua_js_no", "i-ua_js_yes");if(document.compatMode!="CSS1Compat")document.documentElement.className=document.documentElement.className.replace("i-ua_css_standart", "i-ua_css_quirks");</script><script src="//yandex.st/jquery/1.6.2/jquery.min.js"></script><!--[if gt IE 7]><!--><link rel="stylesheet" href="b-page.css"/><!--<![endif]--><!--[if lt IE 8]><link rel="stylesheet" href="b-page.ie.css"/><![endif]--><script src="b-page.js"></script></head><body class="b-page__body b-page"><div class="b-text"><h1 class="b-text__h1">Обвязка страницы</h1><p class="b-text__p"><tt>{&quot;block&quot;:&quot;b-page&quot;}</tt></p><p class="b-text__p">﻿Блок <tt>b-page</tt> создаёт теги верхнего уровня страницы: <tt>html</tt>, <tt>head</tt>, <tt>body</tt>. Он отвечает за то, какие подключить css и js-файлы к странице, выставление meta-тегов, заголовка и т.д.</p><p class="b-text__p">Декларация блока в <tt>bemjson</tt>  начинается объявлением блока и указанием свойства <tt>title</tt>, которое превращается в тег title в HTML.</p><pre class="ohl ohl-js"><code><span class="ohl-punctuation">(</span><span class="ohl-punctuation">{</span>
    <span class="ohl-name">block</span> <span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>b-page<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span>
    <span class="ohl-name">title</span> <span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>Page with link<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span>
    <span class="ohl-operator">.</span><span class="ohl-operator">.</span><span class="ohl-operator">.</span>
<span class="ohl-punctuation">}</span><span class="ohl-punctuation">)</span></code></pre><p class="b-text__p">Указание свойства <tt>head</tt>, дополняет элемент <tt>head</tt>, соответствующий HTML-тегу head элементами для подключения css и  js-файлов:</p><pre class="ohl ohl-js"><code><span class="ohl-punctuation">(</span><span class="ohl-punctuation">{</span>
    <span class="ohl-operator">.</span><span class="ohl-operator">.</span><span class="ohl-operator">.</span>
    <span class="ohl-name">head</span> <span class="ohl-operator">:</span> <span class="ohl-punctuation">[</span>
        <span class="ohl-punctuation">{</span> <span class="ohl-name">elem</span> <span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>css<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span> <span class="ohl-name">url</span> <span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>example.css<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span> <span class="ohl-name">ie</span> <span class="ohl-operator">:</span> <span class="ohl-keyword ohl-keyword-constant">false</span> <span class="ohl-punctuation">}</span><span class="ohl-punctuation">,</span>
        <span class="ohl-punctuation">{</span> <span class="ohl-name">elem</span> <span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>css<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span> <span class="ohl-name">url</span> <span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>example.ie.css<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span> <span class="ohl-name">ie</span> <span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>lt IE 8<span class="ohl-punctuation">&apos;</span></span> <span class="ohl-punctuation">}</span><span class="ohl-punctuation">,</span>
        <span class="ohl-punctuation">{</span> <span class="ohl-name">elem</span> <span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>js<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span> <span class="ohl-name">url</span> <span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>example.js<span class="ohl-punctuation">&apos;</span></span> <span class="ohl-punctuation">}</span>
    <span class="ohl-punctuation">]</span><span class="ohl-punctuation">,</span>
    <span class="ohl-operator">.</span><span class="ohl-operator">.</span><span class="ohl-operator">.</span>
 <span class="ohl-punctuation">}</span><span class="ohl-punctuation">)</span></code></pre><p class="b-text__p">Элемент css превращается в HTML в тег link, подключающий как css-стиль тут файл, что указан в свойстве url этого элемента. Также у такого элемента может быть свойство-флаг ie.<br/> Если такой флаг <tt>false</tt>, то будут использоваться такие condittional comments, которые предотвратят использование этих стилей в IE. При строчном значении этого свойства тег link , будет обёрнут в conditional comment, и этот стиль будет грузиться и использоваться указанных браузерах.<br/> Также есть возможность указывать свойство content для содержания тега style:</p><pre class="ohl ohl-js"><code><span class="ohl-punctuation">(</span><span class="ohl-punctuation">{</span>
    <span class="ohl-operator">.</span><span class="ohl-operator">.</span><span class="ohl-operator">.</span>
    <span class="ohl-name">head</span> <span class="ohl-operator">:</span> <span class="ohl-punctuation">[</span>
        <span class="ohl-punctuation">{</span>
            <span class="ohl-name">elem</span> <span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>css<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span>
            <span class="ohl-name">content</span> <span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>.b-blah { color: #f00<span class="ohl-punctuation">&apos;</span></span> <span class="ohl-punctuation">}</span>
        <span class="ohl-punctuation">}</span><span class="ohl-punctuation">,</span>
        <span class="ohl-operator">.</span><span class="ohl-operator">.</span><span class="ohl-operator">.</span>
    <span class="ohl-punctuation">]</span><span class="ohl-punctuation">,</span>
    <span class="ohl-operator">.</span><span class="ohl-operator">.</span><span class="ohl-operator">.</span>
<span class="ohl-punctuation">}</span><span class="ohl-punctuation">)</span></code></pre><p class="b-text__p">Элемент <tt>js</tt> действует аналогично, подключая к странице js-файлы при помощи тега script.</p><p class="b-text__p">Свойство <tt>head</tt> не описывает содержание HTML-тега head полностью, а лишь дополняет дефолтное, которое блок сам создаёт в своём bemhtml-шаблоне:</p><ul class="b-text__ul"><li class="b-text__li">meta-тег с указанием кодировки</li></ul><pre class="ohl ohl-js"><code><span class="ohl-name">content</span><span class="ohl-operator">:</span> <span class="ohl-punctuation">[</span>
    <span class="ohl-punctuation">{</span>
        <span class="ohl-name">tag</span> <span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>meta<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span>
        <span class="ohl-name">attrs</span> <span class="ohl-operator">:</span> <span class="ohl-punctuation">{</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>http-equiv<span class="ohl-punctuation">&apos;</span></span> <span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>content-type<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span> <span class="ohl-name">content</span> <span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>text/html; charset=utf-8<span class="ohl-punctuation">&apos;</span></span> <span class="ohl-punctuation">}</span>
    <span class="ohl-punctuation">}</span><span class="ohl-punctuation">,</span>
    <span class="ohl-operator">.</span><span class="ohl-operator">.</span><span class="ohl-operator">.</span></code></pre><ul class="b-text__ul"><li class="b-text__li">meta-тег для использования IE9 (и выше) в максимальном compatibility режиме</li></ul><pre class="ohl ohl-js"><code><span class="ohl-name">content</span> <span class="ohl-operator">:</span> <span class="ohl-punctuation">[</span>
    <span class="ohl-operator">.</span><span class="ohl-operator">.</span><span class="ohl-operator">.</span>
    <span class="ohl-punctuation">{</span>
        <span class="ohl-name">tag</span> <span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>meta<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span>
        <span class="ohl-name">attrs</span> <span class="ohl-operator">:</span> <span class="ohl-punctuation">{</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>http-equiv<span class="ohl-punctuation">&apos;</span></span> <span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>X-UA-Compatible<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span> <span class="ohl-name">content</span> <span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>IE=EmulateIE7, IE=edge<span class="ohl-punctuation">&apos;</span></span> <span class="ohl-punctuation">}</span>
    <span class="ohl-punctuation">}</span><span class="ohl-punctuation">,</span>
    <span class="ohl-operator">.</span><span class="ohl-operator">.</span><span class="ohl-operator">.</span></code></pre><ul class="b-text__ul"><li class="b-text__li">выставление title страницы из свойства</li></ul><pre class="ohl ohl-js"><code><span class="ohl-name">content</span> <span class="ohl-operator">:</span> <span class="ohl-punctuation">[</span>
    <span class="ohl-operator">.</span><span class="ohl-operator">.</span><span class="ohl-operator">.</span>
    <span class="ohl-punctuation">{</span>
        <span class="ohl-name">tag</span> <span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>title<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span>
        <span class="ohl-name">content</span> <span class="ohl-operator">:</span> <span class="ohl-keyword">this</span><span class="ohl-operator">.</span><span class="ohl-name">ctx</span><span class="ohl-operator">.</span><span class="ohl-name">title</span>
    <span class="ohl-punctuation">}</span><span class="ohl-punctuation">,</span>
    <span class="ohl-operator">.</span><span class="ohl-operator">.</span><span class="ohl-operator">.</span></code></pre><ul class="b-text__ul"><li class="b-text__li">выставление фавиконки</li></ul><pre class="ohl ohl-js"><code><span class="ohl-name">content</span> <span class="ohl-operator">:</span> <span class="ohl-punctuation">[</span>
    <span class="ohl-operator">.</span><span class="ohl-operator">.</span><span class="ohl-operator">.</span>
    <span class="ohl-keyword">this</span><span class="ohl-operator">.</span><span class="ohl-name">ctx</span><span class="ohl-operator">.</span><span class="ohl-name">favicon</span> <span class="ohl-operator">?</span> <span class="ohl-punctuation">{</span>
            <span class="ohl-name">elem</span> <span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>favicon<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span>
            <span class="ohl-name">url</span> <span class="ohl-operator">:</span> <span class="ohl-keyword">this</span><span class="ohl-operator">.</span><span class="ohl-name">ctx</span><span class="ohl-operator">.</span><span class="ohl-name">favicon</span>
        <span class="ohl-punctuation">}</span> <span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span><span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span>
    <span class="ohl-operator">.</span><span class="ohl-operator">.</span><span class="ohl-operator">.</span></code></pre><ul class="b-text__ul"><li class="b-text__li">декларация блока i-ua (о нём в следующих постах)</li></ul><pre class="ohl ohl-js"><code><span class="ohl-name">content</span> <span class="ohl-operator">:</span> <span class="ohl-punctuation">[</span>
    <span class="ohl-operator">.</span><span class="ohl-operator">.</span><span class="ohl-operator">.</span>
    <span class="ohl-punctuation">{</span>
        <span class="ohl-name">block</span> <span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>i-ua<span class="ohl-punctuation">&apos;</span></span>
    <span class="ohl-punctuation">}</span><span class="ohl-punctuation">,</span>
    <span class="ohl-operator">.</span><span class="ohl-operator">.</span><span class="ohl-operator">.</span></code></pre><p class="b-text__p">Аналогично указанию свойства head, может быть задано свойство meta, содержашее один или несколько элементов meta:</p><pre class="ohl ohl-js"><code><span class="ohl-punctuation">(</span><span class="ohl-punctuation">{</span>
    <span class="ohl-operator">.</span><span class="ohl-operator">.</span><span class="ohl-operator">.</span>
    <span class="ohl-name">meta</span> <span class="ohl-operator">:</span> <span class="ohl-punctuation">{</span>
        <span class="ohl-name">elem</span> <span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>meta<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span>
        <span class="ohl-name">attrs</span> <span class="ohl-operator">:</span> <span class="ohl-punctuation">{</span>
            <span class="ohl-name">name</span> <span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>keywords<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span>
            <span class="ohl-name">content</span> <span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>js, css, html<span class="ohl-punctuation">&apos;</span></span>
        <span class="ohl-punctuation">}</span>
    <span class="ohl-punctuation">}</span><span class="ohl-punctuation">,</span>
    <span class="ohl-operator">.</span><span class="ohl-operator">.</span><span class="ohl-operator">.</span>
<span class="ohl-punctuation">}</span><span class="ohl-punctuation">)</span></code></pre><pre class="ohl ohl-js"><code><span class="ohl-punctuation">(</span><span class="ohl-punctuation">{</span>
    <span class="ohl-operator">.</span><span class="ohl-operator">.</span><span class="ohl-operator">.</span>
    <span class="ohl-name">meta</span> <span class="ohl-operator">:</span> <span class="ohl-punctuation">[</span>
        <span class="ohl-punctuation">{</span>
            <span class="ohl-name">elem</span> <span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>meta<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span>
            <span class="ohl-name">attrs</span> <span class="ohl-operator">:</span> <span class="ohl-punctuation">{</span>
                <span class="ohl-name">name</span> <span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>keywords<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span>
                <span class="ohl-name">content</span> <span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>js, css, html<span class="ohl-punctuation">&apos;</span></span>
            <span class="ohl-punctuation">}</span>
        <span class="ohl-punctuation">}</span><span class="ohl-punctuation">,</span>
        <span class="ohl-punctuation">{</span>
            <span class="ohl-name">elem</span> <span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>meta<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span>
            <span class="ohl-name">attrs</span> <span class="ohl-operator">:</span> <span class="ohl-punctuation">{</span>
                <span class="ohl-name">name</span> <span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>description<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span>
                <span class="ohl-name">content</span> <span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>Yet another webdev blog<span class="ohl-punctuation">&apos;</span></span>
            <span class="ohl-punctuation">}</span>
        <span class="ohl-punctuation">}</span>
    <span class="ohl-punctuation">]</span>
    <span class="ohl-operator">.</span><span class="ohl-operator">.</span><span class="ohl-operator">.</span>
<span class="ohl-punctuation">}</span><span class="ohl-punctuation">)</span></code></pre><p class="b-text__p">Значением свойства content блока b-page может быть хеш-описание содержимого (если речь идёт лишь об одном блоке) или массив блоков, описанных хешами:</p><pre class="ohl ohl-js"><code><span class="ohl-punctuation">(</span><span class="ohl-punctuation">{</span>
    <span class="ohl-operator">.</span><span class="ohl-operator">.</span><span class="ohl-operator">.</span>
    <span class="ohl-name">content</span> <span class="ohl-operator">:</span> <span class="ohl-punctuation">[</span>
        <span class="ohl-punctuation">{</span>
            <span class="ohl-name">block</span> <span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>b-link<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span>
            <span class="ohl-name">mods</span> <span class="ohl-operator">:</span> <span class="ohl-punctuation">{</span> <span class="ohl-name">pseudo</span> <span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>yes<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span> <span class="ohl-name">togcolor</span> <span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>yes<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span> <span class="ohl-name">color</span><span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>green<span class="ohl-punctuation">&apos;</span></span> <span class="ohl-punctuation">}</span><span class="ohl-punctuation">,</span>
            <span class="ohl-name">url</span> <span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>#<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span>
            <span class="ohl-name">target</span> <span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>_blank<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span>
            <span class="ohl-name">title</span> <span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>Кликни меня<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span>
            <span class="ohl-name">content</span> <span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>Псевдоссылка, меняющая цвет по клику<span class="ohl-punctuation">&apos;</span></span>
        <span class="ohl-punctuation">}</span>
    <span class="ohl-punctuation">]</span>
<span class="ohl-punctuation">}</span><span class="ohl-punctuation">)</span></code></pre><p class="b-text__p">На блоки, содержащиеся в content, действуют их bemhtml-шаблоны.</p></div></body></html>
