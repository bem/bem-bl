<!DOCTYPE html><html class="i-ua_js_no i-ua_css_standard" xmlns:fb="http://ogp.me/ns/fb#"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=EmulateIE7, IE=edge"/><title> Основные понятия шаблонизатора BEMHTML</title><meta property="fb:app_id" content="352298414783700"/><script>;(function(d,e,c,r){e=d.documentElement;c="className";r="replace";e[c]=e[c][r]("i-ua_js_no","i-ua_js_yes");if(d.compatMode!="CSS1Compat")e[c]=e[c][r]("i-ua_css_standart","i-ua_css_quirks")})(document);</script><!--[if gt IE 7]><!--><link rel="stylesheet" href="_bemhtml-syntax.ru.css"/><!--<![endif]--><!--[if lt IE 8]><link rel="stylesheet" href="_bemhtml-syntax.ru.ie.css"/><![endif]--><script src="http://yandex.st/jquery/1.6.2/jquery.min.js"></script><script src="bemhtml-syntax.ru.js"></script></head><body class="b-page__body b-page"><!-- Yandex.Metrika counter --><div style="display:none;"><script type="text/javascript">(function(w, c) { (w[c] = w[c] || []).push(function() { try { w.yaCounter10053391 = new Ya.Metrika({id:10053391, enableAll: true, trackHash:true}); } catch(e) { } }); })(window, "yandex_metrika_callbacks");</script></div><script src="//mc.yandex.ru/metrika/watch.js" type="text/javascript" defer="defer"></script><noscript><div><img src="//mc.yandex.ru/watch/10053391" style="position:absolute; left:-9999px;" alt="" /></div></noscript><!-- /Yandex.Metrika counter --><div class="b-page__i"><div class="b-page__i"><div class="b-breadcrumbs"><div class="b-menu-horiz b-menu-horiz_layout_horiz i-bem" onclick="return {&quot;b-menu-horiz&quot;:{}}"><div class="b-menu-horiz__layout-unit b-menu-horiz__layout-unit_position_first b-menu-horiz__layout-unit_position_last"><div class="b-menu-horiz__item"><a class="b-link" href="/">Index</a></div></div></div></div><div class="b-blocks-desc"><div class="b-text"><h1 class="b-text__h1" id="OsnovnyeponyatiyashablonizatoraBEMHTML">Основные понятия шаблонизатора BEMHTML</h1><p class="b-text__p"><tt>BEMHTML</tt> — это шаблонизатор, использующий предметную область «Блок-Элемент-Модификатор». Шаблоны, написанные на <tt>BEMHTML</tt>, компилируются в <tt>plain JavaScript</tt>, который может быть выполнен в любом интерпретаторе <tt>JavaScript</tt> (как на сервере, так и в браузере).</p><p class="b-text__p">Входными данными для таких шаблонов служит описание страницы в формате <tt>JSON</tt>, а на выходе получается <tt>HTML</tt>. Простой пример такого описания страницы находится в <a class="b-link" href="https://github.com/bem/bem-bl-test/blob/master/pages/example/example.bemjson.js">тестовом проекте библиотеки блоков</a>. О том, что такое <tt>BEMHTML</tt>, расказывалось в докладе Сергея Бережного «bemhtml — bem js-шаблонизатор», можно посмотреть видео и почитать презентацию.</p><p class="b-text__p"><tt>BEMHTML</tt> шаблоны построены по декларативному принципу (как <tt>XSLT</tt>), каждый шаблон состоит из двух частей: <b>предикат и тело шаблона</b>.<br/> <b>Предикат</b> – это набор условий, при котороых выполняется шаблон.<br/> <b>Тело</b> – инструкции к выполнению.</p><h2 class="b-text__h2" id="Predikaty">Предикаты</h2><p class="b-text__p">Предикат может состоять из одного или нескольких условий. <b>Например:</b></p><pre class="ohl ohl_lang_js"><span class="ohl-name">block</span> <span class="ohl-name">b</span><span class="ohl-operator">-</span><span class="ohl-name">menu</span><span class="ohl-punctuation">,</span> <span class="ohl-name">elem</span> <span class="ohl-name">item</span><span class="ohl-punctuation">,</span> <span class="ohl-name">elemMod</span> <span class="ohl-name">state</span> <span class="ohl-name">current</span><span class="ohl-punctuation">,</span> <span class="ohl-name">tag</span><span class="ohl-operator">:</span></pre><p class="b-text__p">Запись через запятую означает, что шаблон применим только тогда, когда выполнятся все условия.</p><h6 class="b-text__h6" id="Usloviyamogutbytysleduyushhixtipov">Условия могут быть следующих типов:</h6><ul class="b-text__ul"><li class="b-text__li">выражающие совпадение со входным <tt>BEM</tt> деревом</li><li class="b-text__li">применяемая мода</li><li class="b-text__li">произвольное условие</li></ul><h3 class="b-text__h3" id="UsloviyasovpadeniyasovxodnymBEMderevom">Условия совпадения со входным BEM деревом</h3><p class="b-text__p">При помощи этих условий можно выразить совпадение со входным <tt>BEM</tt> деревом. Например, можно описать, что шаблон применим к конкретному блоку.<br/></p><h6 class="b-text__h6" id="VozmozhnysleduyushhieopisaniyaBEMsushhnostejkkotorymprimenimshablon">Возможны следующие описания BEM сущностей, к которым применим шаблон:</h6><ul class="b-text__ul"><li class="b-text__li">предикат на блок — <tt>block b-menu</tt></li><li class="b-text__li">предикат на элемент блока — <tt>block b-menu, elem item</tt></li><li class="b-text__li">предикат на модификатор блока — <tt>block b-link, mod pseudo yes</tt></li><li class="b-text__li">предикат на модификатор элемента — <tt>block b-menu, elem item, elemMod state current</tt></li></ul><p class="b-text__p">Именами и значениями <tt>BEM</tt> сущностей в таких условиях могут быть также <tt>JS</tt> выражения:</p><pre class="ohl ohl_lang_js"><span class="ohl-name">block</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>b<span class="ohl-punctuation">&apos;</span></span> <span class="ohl-operator">+</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>-<span class="ohl-punctuation">&apos;</span></span> <span class="ohl-operator">+</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>link<span class="ohl-punctuation">&apos;</span></span></pre><pre class="ohl ohl_lang_js"><span class="ohl-name">block</span> <span class="ohl-name">b</span><span class="ohl-operator">-</span><span class="ohl-name">menu</span><span class="ohl-punctuation">,</span> <span class="ohl-name">elem</span> <span class="ohl-punctuation">[</span><span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>i<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>t<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>e<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>m<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">]</span><span class="ohl-operator">.</span><span class="ohl-name">join</span><span class="ohl-punctuation">(</span><span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span><span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">)</span></pre><h3 class="b-text__h3" id="Mody">Моды</h3><p class="b-text__p">Для каждого блока может понадобиться несколько шаблонов: для тела, для атрибутов, для контента. Поэтому есть необходимость вводить понятие мод. Наличие разных мод позволяет написать несколько шаблонов для одной и той же <tt>BEM</tt> сущности, каждый из которых продуцирует свою часть выходного <tt>HTML</tt> этой <tt>BEM</tt> сущности.</p><h6 class="b-text__h6" id="Realizovanysleduyushhiemody">Реализованы следующие моды:</h6><ul class="b-text__ul"><li class="b-text__li"><b>default</b><ul class="b-text__ul"><li class="b-text__li">С обработки моды <tt>default</tt> начинается работа любого <tt>BEMHTML</tt> шаблона. Если мода <tt>default</tt> явно не фигурирует в <tt>BEMHTML</tt> шаблоне, то работа происходит
    так, как описано в ядре <tt>BEMHTML</tt> реализации элемента <tt>html</tt> блока <a class="b-link" href="https://github.com/bem/bem-bl/blob/master/blocks-common/i-bem/__html/i-bem__html.bemhtml">i-bem</a>.
    Там описано, в каких случаях и в каком порядке вызывать другие моды, относящиеся к контекстной <tt>BEM</tt> сущности.</li></ul></li><li class="b-text__li"><b>bem</b><ul class="b-text__ul"><li class="b-text__li">При установке в <tt>false</tt> позволяет не создавать у <tt>DOM-ноды</tt> данной <tt>BEM</tt> сущности характерных <tt>CSS</tt> классов в предметной области <tt>BEM</tt>.</li></ul></li><li class="b-text__li"><b>js</b><ul class="b-text__ul"><li class="b-text__li">При установке в <tt>true</tt> говорит о том, что у блока есть клиентский <tt>JavaScript</tt>, значит, блок будет смиксован с блоком <tt>i-bem</tt>
   (появится дополнительный <tt>CSS</tt> класс) и в его <tt>DOM-ноде</tt> появится атрибут <tt>onclick</tt>, хранящий параметры для клиентского <tt>js</tt> компонента.</li></ul></li></ul><pre class="ohl ohl_lang_js"><span class="ohl-name">block</span> <span class="ohl-name">b</span><span class="ohl-operator">-</span><span class="ohl-name">link</span> <span class="ohl-punctuation">{</span>
    <span class="ohl-operator">.</span><span class="ohl-operator">.</span><span class="ohl-operator">.</span>
	<span class="ohl-name">js</span><span class="ohl-operator">:</span> <span class="ohl-keyword ohl-keyword-constant">true</span>
	<span class="ohl-operator">.</span><span class="ohl-operator">.</span><span class="ohl-operator">.</span>
<span class="ohl-punctuation">}</span></pre><ul class="b-text__ul"><li class="b-text__li"><b>tag</b><ul class="b-text__ul"><li class="b-text__li">Переопределяет <tt>HTML</tt> тег <tt>BEM</tt> сущности, который по умолчанию задан как <tt>div</tt>.</li></ul></li></ul><pre class="ohl ohl_lang_js"><span class="ohl-name">block</span> <span class="ohl-name">b</span><span class="ohl-operator">-</span><span class="ohl-name">icon</span> <span class="ohl-punctuation">{</span>
    <span class="ohl-name">tag</span><span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>img<span class="ohl-punctuation">&apos;</span></span>
    <span class="ohl-operator">.</span><span class="ohl-operator">.</span><span class="ohl-operator">.</span>
<span class="ohl-punctuation">}</span></pre><ul class="b-text__ul"><li class="b-text__li"><b>attrs</b><ul class="b-text__ul"><li class="b-text__li">Расширяет множество атрибутов <tt>DOM-ноды</tt> <tt>BEM</tt> сущности дополнительными значениями.</li></ul></li></ul><pre class="ohl ohl_lang_js"><span class="ohl-name">block</span> <span class="ohl-name">b</span><span class="ohl-operator">-</span><span class="ohl-name">icon</span> <span class="ohl-punctuation">{</span>
    <span class="ohl-operator">.</span><span class="ohl-operator">.</span><span class="ohl-operator">.</span>
    <span class="ohl-name">attrs</span><span class="ohl-operator">:</span> <span class="ohl-punctuation">{</span>

        <span class="ohl-keyword">return</span> <span class="ohl-punctuation">{</span><span class="ohl-punctuation">}</span><span class="ohl-punctuation">;</span>

    <span class="ohl-punctuation">}</span>
<span class="ohl-punctuation">}</span></pre><ul class="b-text__ul"><li class="b-text__li"><b>cls</b><ul class="b-text__ul"><li class="b-text__li">Добавка к <tt>HTML</tt> атрибуту <tt>class</tt>.</li></ul></li><li class="b-text__li"><b>mix</b><ul class="b-text__ul"><li class="b-text__li">Определяет массив подмешиваемых <tt>BEM</tt> сущностей. Используется для размещения на одном <tt>DOM</tt> узле нескольких <tt>BEM</tt> сущностей.
   Например, двух блоков, одного блока или элемента другого блока.<br/>
   Также нужен для подмешивания к существующей контекстной сущности модификаторов внутри <tt>BEMHTML</tt> шаблонов.</li></ul></li><li class="b-text__li"><b>content</b><ul class="b-text__ul"><li class="b-text__li">Определяет содержание блока или элемента. Содержит <tt>BEMJSON</tt>, описывающий содержание или строку как частный случай простого <tt>BEMJSON</tt>.</li></ul></li></ul><pre class="ohl ohl_lang_js"><span class="ohl-name">block</span> <span class="ohl-name">b</span><span class="ohl-operator">-</span><span class="ohl-name">layout</span><span class="ohl-operator">-</span><span class="ohl-name">table</span><span class="ohl-punctuation">,</span> <span class="ohl-name">elem</span> <span class="ohl-name">gap</span> <span class="ohl-punctuation">{</span>
    <span class="ohl-operator">.</span><span class="ohl-operator">.</span><span class="ohl-operator">.</span>
    <span class="ohl-name">content</span><span class="ohl-operator">:</span> <span class="ohl-punctuation">{</span> <span class="ohl-name">elem</span><span class="ohl-operator">:</span>  <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>gap-i<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span> <span class="ohl-name">tag</span><span class="ohl-operator">:</span>  <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>i<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span><span class="ohl-punctuation">}</span>
<span class="ohl-punctuation">}</span></pre><h3 class="b-text__h3" id="Proizvolynoeuslovie">Произвольное условие</h3><p class="b-text__p">Произвольные условия учитывают совпадения с данными, не попадающими под предметную область <tt>BEM</tt>. <b>Например</b>:</p><pre class="ohl ohl_lang_js"><span class="ohl-name">block</span> <span class="ohl-name">b</span><span class="ohl-operator">-</span><span class="ohl-name">icon</span> <span class="ohl-punctuation">{</span>
    <span class="ohl-operator">.</span><span class="ohl-operator">.</span><span class="ohl-operator">.</span>
    <span class="ohl-name">attrs</span><span class="ohl-punctuation">,</span> <span class="ohl-keyword">this</span><span class="ohl-operator">.</span><span class="ohl-name">ctx</span><span class="ohl-operator">.</span><span class="ohl-name">url</span><span class="ohl-operator">:</span> <span class="ohl-punctuation">{</span>

        <span class="ohl-keyword">return</span> <span class="ohl-punctuation">{</span> <span class="ohl-name">src</span><span class="ohl-operator">:</span> <span class="ohl-keyword">this</span><span class="ohl-operator">.</span><span class="ohl-name">ctx</span><span class="ohl-operator">.</span><span class="ohl-name">url</span> <span class="ohl-punctuation">}</span><span class="ohl-punctuation">;</span>

    <span class="ohl-punctuation">}</span>
<span class="ohl-punctuation">}</span></pre><p class="b-text__p">Здесь <tt>this.ctx</tt> — хеш с данными контекстной сущности из <tt>BEMJSON</tt>, в данном случае — блока <tt>b-icon</tt>.</p><p class="b-text__p">Последнее из условий предиката отделено от тела шаблона двоеточием:</p><pre class="ohl ohl_lang_js"><span class="ohl-name">block</span> <span class="ohl-name">b</span><span class="ohl-operator">-</span><span class="ohl-name">icon</span><span class="ohl-punctuation">,</span> <span class="ohl-name">attrs</span><span class="ohl-punctuation">,</span> <span class="ohl-keyword">this</span><span class="ohl-operator">.</span><span class="ohl-name">ctx</span><span class="ohl-operator">.</span><span class="ohl-name">url</span><span class="ohl-operator">:</span> <span class="ohl-punctuation">{</span>
    Тело шаблона
<span class="ohl-punctuation">}</span></pre><h2 class="b-text__h2" id="Telo">Тело</h2><h6 class="b-text__h6" id="PosledvoetochiyaBEMHTMLshablonmozhetsoderzhaty">После двоеточия BEMHTML шаблон может содержать:</h6><ul class="b-text__ul"><li class="b-text__li"><b>boolean или строку или число</b></li></ul><pre class="ohl ohl_lang_js"><span class="ohl-name">block</span> <span class="ohl-name">b</span><span class="ohl-operator">-</span><span class="ohl-name">icon</span> <span class="ohl-punctuation">{</span>
    <span class="ohl-name">tag</span><span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>img<span class="ohl-punctuation">&apos;</span></span>
    <span class="ohl-operator">.</span><span class="ohl-operator">.</span><span class="ohl-operator">.</span>
<span class="ohl-punctuation">}</span></pre><ul class="b-text__ul"><li class="b-text__li"><b>bemjson</b></li></ul><pre class="ohl ohl_lang_js"><span class="ohl-name">block</span> <span class="ohl-name">b</span><span class="ohl-operator">-</span><span class="ohl-name">layout</span><span class="ohl-operator">-</span><span class="ohl-name">table</span><span class="ohl-punctuation">,</span> <span class="ohl-name">elem</span> <span class="ohl-name">gap</span> <span class="ohl-punctuation">{</span>
    <span class="ohl-operator">.</span><span class="ohl-operator">.</span><span class="ohl-operator">.</span>
    <span class="ohl-name">content</span><span class="ohl-operator">:</span> <span class="ohl-punctuation">{</span> <span class="ohl-name">elem</span><span class="ohl-operator">:</span>  <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>gap-i<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span> <span class="ohl-name">tag</span><span class="ohl-operator">:</span>  <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>i<span class="ohl-punctuation">&apos;</span></span> <span class="ohl-punctuation">}</span>
<span class="ohl-punctuation">}</span></pre><ul class="b-text__ul"><li class="b-text__li"><b>исполняемый JavaScript код</b>, заключённый в фигурные скобки</li></ul><pre class="ohl ohl_lang_js"><span class="ohl-name">block</span> <span class="ohl-name">b</span><span class="ohl-operator">-</span><span class="ohl-name">icon</span> <span class="ohl-punctuation">{</span>
    <span class="ohl-operator">.</span><span class="ohl-operator">.</span><span class="ohl-operator">.</span>
    <span class="ohl-name">attrs</span><span class="ohl-operator">:</span> <span class="ohl-punctuation">{</span>

        <span class="ohl-keyword ohl-keyword-declaration">var</span> <span class="ohl-name">ctx</span> <span class="ohl-operator">=</span> <span class="ohl-keyword">this</span><span class="ohl-operator">.</span><span class="ohl-name">ctx</span><span class="ohl-punctuation">,</span>
            <span class="ohl-name">a</span> <span class="ohl-operator">=</span> <span class="ohl-punctuation">{</span> <span class="ohl-name">src</span><span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>//yandex.st/lego/_/La6qi18Z8LwgnZdsAr1qy1GwCwo.gif<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span> <span class="ohl-name">alt</span><span class="ohl-operator">:</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span><span class="ohl-punctuation">&apos;</span></span> <span class="ohl-punctuation">}</span><span class="ohl-punctuation">,</span>
            <span class="ohl-name">props</span> <span class="ohl-operator">=</span> <span class="ohl-punctuation">[</span><span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>src<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>alt<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>width<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">,</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>height<span class="ohl-punctuation">&apos;</span></span><span class="ohl-punctuation">]</span><span class="ohl-punctuation">,</span> <span class="ohl-name">p</span><span class="ohl-punctuation">;</span>

        <span class="ohl-keyword">while</span><span class="ohl-punctuation">(</span><span class="ohl-name">p</span> <span class="ohl-operator">=</span> <span class="ohl-name">props</span><span class="ohl-operator">.</span><span class="ohl-name">shift</span><span class="ohl-punctuation">(</span><span class="ohl-punctuation">)</span><span class="ohl-punctuation">)</span> <span class="ohl-name">ctx</span><span class="ohl-punctuation">[</span><span class="ohl-name">p</span><span class="ohl-punctuation">]</span> <span class="ohl-operator">&amp;&amp;</span> <span class="ohl-punctuation">(</span><span class="ohl-name">a</span><span class="ohl-punctuation">[</span><span class="ohl-name">p</span><span class="ohl-punctuation">]</span> <span class="ohl-operator">=</span> <span class="ohl-name">ctx</span><span class="ohl-punctuation">[</span><span class="ohl-name">p</span><span class="ohl-punctuation">]</span><span class="ohl-punctuation">)</span><span class="ohl-punctuation">;</span>

        <span class="ohl-keyword">return</span> <span class="ohl-name">a</span><span class="ohl-punctuation">;</span>

    <span class="ohl-punctuation">}</span>
<span class="ohl-punctuation">}</span></pre><h2 class="b-text__h2" id="Kontekst">Контекст</h2><p class="b-text__p">Все шаблоны выполняются в каком-либо контексте. Контекст выражается ключевым словом <tt>this</tt>, доступным как в предикатах, так и в теле шаблона.</p><h6 class="b-text__h6" id="Vkonteksteestynaborpolej">В контексте есть набор полей:</h6><ul class="b-text__ul"><li class="b-text__li"><tt><b>this.block</b> {String}</tt><br/><ul class="b-text__ul"><li class="b-text__li"><b>Например</b>, может быть использован в предикате для сравнения значения:</li></ul></li></ul><pre class="ohl ohl_lang_js">    <span class="ohl-keyword">this</span><span class="ohl-operator">.</span><span class="ohl-name">block</span> <span class="ohl-operator">===</span> <span class="ohl-string ohl-string-single"><span class="ohl-punctuation">&apos;</span>b-link<span class="ohl-punctuation">&apos;</span></span></pre><p class="b-text__p">    Это идентично записи условия на языке <tt>BEM</tt> сущностей</p><pre class="ohl ohl_lang_js">    <span class="ohl-name">block</span> <span class="ohl-name">b</span><span class="ohl-operator">-</span><span class="ohl-name">link</span></pre><ul class="b-text__ul"><li class="b-text__li"><tt><b>this.elem</b> {String}</tt> — имя элемента</li><li class="b-text__li"><tt><b>this.mods</b> {Object}</tt> — модификаторы блока</li><li class="b-text__li"><tt><b>this.elemMods</b> {Object}</tt> — модификаторы элемента блока</li><li class="b-text__li"><tt><b>this.ctx</b> {Object}</tt> — фрагмент входного дерева для текущего контекста. Входной <tt>JSON</tt> предоставляется <tt>&quot;as is&quot;</tt>, безо всяких нормализаций и модификаций.
   Используется для получения доступа к данным, например, <tt>this.ctx.url</tt> в шаблоне блока <tt>b-link</tt>.</li><li class="b-text__li"><tt><b>this.isFirst</b> {Function}</tt> — функция проверяет, является ли этот элемент первым</li><li class="b-text__li"><tt><b>this.isLast</b> {Function}</tt> — функция проверяет, является ли этот элемент последним</li><li class="b-text__li"><tt><b>this.position</b> {Number}</tt> — возвращает позицию контекста</li></ul><h2 class="b-text__h2" id="Sintaksis">Синтаксис</h2><p class="b-text__p">Если у нескольких шаблонов часть предиката совпадает, их можно объединить, используя фигурные скобки.<br/> <b>Например</b>, так можно описать элемент <tt>item</tt> блока в <tt>b-menu</tt>:</p><pre class="ohl ohl_lang_js"><span class="ohl-name">block</span> <span class="ohl-name">b</span><span class="ohl-operator">-</span><span class="ohl-name">menu</span> <span class="ohl-punctuation">{</span>
    <span class="ohl-name">elem</span> <span class="ohl-name">item</span> <span class="ohl-punctuation">{</span>
        Здесь всё про <span class="ohl-name">b</span><span class="ohl-operator">-</span><span class="ohl-name">menu__item</span>
    <span class="ohl-punctuation">}</span>
<span class="ohl-punctuation">}</span></pre><p class="b-text__p">То же самое можно написать через запятую. Вот так:</p><pre class="ohl ohl_lang_js"><span class="ohl-name">block</span> <span class="ohl-name">b</span><span class="ohl-operator">-</span><span class="ohl-name">menu</span><span class="ohl-punctuation">,</span> <span class="ohl-name">elem</span> <span class="ohl-name">item</span> <span class="ohl-punctuation">{</span>
    Здесь всё про <span class="ohl-name">b</span><span class="ohl-operator">-</span><span class="ohl-name">menu__item</span>
<span class="ohl-punctuation">}</span></pre><p class="b-text__p">То есть, скобки — это <tt>syntax sugar</tt> над запятыми. Вложенность условий может быть сколь угодно большой.</p><h3 class="b-text__h3" id="local">local</h3><p class="b-text__p"><tt>local</tt> — это блок кода языка <tt>BEMHTML</tt>, по синтаксису подобный блокам <tt>while</tt> и <tt>for</tt> из <tt>JavaScript</tt>.</p><h6 class="b-text__h6" id="Vozmozhnytakievariantyzapisiblokalocal">Возможны такие варианты записи блока local:</h6><ul class="b-text__ul"><li class="b-text__li"><b>краткая запись</b></li></ul><pre class="ohl ohl_lang_js">    <span class="ohl-name">local</span><span class="ohl-punctuation">(</span><span class="ohl-name">expressions</span><span class="ohl-punctuation">)</span> <span class="ohl-name">code</span></pre><ul class="b-text__ul"><li class="b-text__li"><b>полная запись</b></li></ul><pre class="ohl ohl_lang_js">    <span class="ohl-name">local</span><span class="ohl-punctuation">(</span><span class="ohl-name">expressions</span><span class="ohl-punctuation">)</span> <span class="ohl-punctuation">{</span> <span class="ohl-name">code</span> <span class="ohl-punctuation">}</span></pre><p class="b-text__p"><tt>local</tt> используется для временного изменения контекста и переменных, также для последующих операций с ними. В круглых скобках могут быть описаны только выражения присваивания, в фигурных — <tt>JavaScript</tt> код, который выполняется с учётом заданных изменений. По выходу из блока <tt>local</tt> все переменные и объекты (в том числе и <tt>this.ctx</tt>) приобретают свои прежние значения. Более подробную информацию можно найти в <a class="b-link" href="https://github.com/veged/xjst/blob/master/doc/tech.ru.md">документации xjst</a>.</p></div></div><fb:comments class="b-fb__comments b-fb i-bem" onclick="return {&quot;b-fb&quot;:{}}" num_posts="10" width="500"></fb:comments></div></div></body></html>